<!-- form-profile.html -->

<!--<div flex-xs="" flex-gt-xs="50" layout="column">-->
<form external-submit id="primaryForm" name="primaryForm" ng-submit="$ctrl.upload()" enctype='multipart/form-data'>
  <main class="card-collection">


    <div layout="row">

      <div flex></div>

      <div><md-button class="md-icon-button" ng-click="$ctrl.removeMembers()"><md-icon>delete</md-icon></md-button></div>
        <md-menu md-position-mode="target-right bottom">

          <md-button aria-label="Sort" class="md-icon-button" ng-click="$mdOpenMenu($event)">
            <md-icon md-menu-origin="">sort</md-icon>
          </md-button>

          <md-menu-content width="4" layout="column">
            
            <md-menu-item>
              <md-button ng-click="$ctrl.sortBy('first_name')">
                  <div layout="row" flex="">
                    <p flex="">Name</p>
                  </div>
              </md-button>
            </md-menu-item>

            <md-menu-item>
              <md-button ng-click="$ctrl.sortBy('first_name')">
                  <div layout="row" flex="">
                    <p flex="">Role</p>
                  </div>
              </md-button>
            </md-menu-item>

            <md-menu-item>
              <md-button ng-click="$ctrl.sortBy('first_name')">
                  <div layout="row" flex="">
                    <p flex="">Join date</p>
                  </div>
              </md-button>
            </md-menu-item>

          </md-menu-content>
        </md-menu>

    </div>

    <div layout="column">     

         <md-list class="members-list" layout="column" flex>
        <md-list-item ng-repeat="item in $ctrl.members " layout="row" flex data-item-id="{{item.id}}" id="member-{{item.id}}">
          
          <!-- First initial icon -->
          <div flex="none" class="abstract-first-initial">
            <span>              
                <md-checkbox ng-checked="$ctrl.isItemSelected(item)" ng-click="$ctrl.toggleItem(item)"></md-checkbox>
              </span>
          </div>



          <md-button class="item-row md-button" flex="100" layout="row">
            <!-- Second initial icon -->
            <div class="abstract-graphic-id" flex="none">
              <span>{{item.person.last_name | InitialFilter }}</span>
            </div>

            <!-- Full display name -->
            <div class="display-name" flex>
              <span>{{item.person.first_name  }} {{item.person.last_name}}</span>
            </div>

            <div class="member-since" flex>
              <span>{{item.role}}
            </div>

            <div class="member-since" flex>
              <span>{{item.join_date | date:'MMM, yyyy'}}
            </div>

            <div class="item-actions" flex="none">
              <md-button class="md-icon-button" ng-click="$ctrl.editMember(item,$event);$event.stopPropagation();$event.preventDefault();"><md-icon>edit</md-icon></md-button>
              <md-button class="md-icon-button" ng-click="$ctrl.removeMember(item, $event);$event.stopPropagation();$event.preventDefault();"><md-icon>delete</md-icon></md-button>
            </div>
          </md-button>


        </md-list-item>


      </md-list>
  
  
  </main>
  
  <input type="hidden" name="context" value="$ctrl.context"/>

  <md-button class="md-primary md-fab md-fab-br md-whiteframe-12dp" ng-click="$ctrl.addMember()"><md-icon>add</md-icon></md-button>
  
</form>
